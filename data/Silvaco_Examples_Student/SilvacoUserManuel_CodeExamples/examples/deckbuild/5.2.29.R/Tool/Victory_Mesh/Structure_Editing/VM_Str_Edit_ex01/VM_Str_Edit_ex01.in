# (c) Silvaco Inc., 2024

# Mirroring a structure file (MIRROR)

# Required Modules
#  Victory Process
#   -Core Simulator 
#  Victory Mesh
#   -2D Meshing

# Example Name
Set name=“VM_Str_Edit_ex01” 

####### PROCESS SIMULATION ####### 
# Makes simple structure with MOS trench and junction
GO victoryprocess simflags="-P 4"

INIT material=silicon from=1 to=2 depth=2 \
resolution=0.01,0.01 meshdepth=2 gasheight=2.5 \
flow.dim=2D_xz c.phosphorus=1E14

ETCH min material=silicon thickness=1.1 right.to.x=1.8
ETCH conformal thickness=0.2 material=silicon right.to.x=1.8

DEPOSIT conformal material=oxide thickness=0.01
ETCH material=oxide above=0
DEPOSIT material=polysilicon thickness=0 max

DOPING boron conc=1e20 gauss.sigma=0.05 peak=2

# Save simulation status for remeshing
SAVE name=$'name'_VP_sv

# Single half trench cell - no mirror. Including
# interface and junction refinement using delaunay mesh
GO victorymesh simflags="-P 4"

LOAD in="$'name'_VP_sv"

REMESH delaunay 

# Base mesh
REFINE max.size=0.05 regions="*"

# Interface refinement but increase the distance over which
# the refinement grades over
REFINE max.interface.size=0.01 max.interface.distance=0.5 grading=linear

# Junction refinement
REFINE max.junction.size=0.02 grading="linear"

SAVE out="$'name'_VM_Half"

# Single mirror about the +ve x-axis
# Interface and junction refinement using delaunay mesh
GO victorymesh simflags="-P 4"

LOAD in="$'name'_VP_sv"

# Single mirror about the +ve x-axis
# Structure manipulation before remesh
MIRROR axes="+1x"

REMESH delaunay 

# Base mesh
REFINE max.size=0.05 regions="*"

# Interface refinement but increase the distance over which
# the refinement grades over
REFINE max.interface.size=0.01 max.interface.distance=0.5 grading=linear

# Junction refinement
REFINE max.junction.size=0.02 grading="linear"

SAVE out="$'name'_VM_Single"

# Multiple mirror about the +ve x-axis and single about
# -ve x-axis
# Interface and junction refinement using delaunay mesh
GO victorymesh simflags="-P 4"

LOAD in="$'name'_VP_sv"

# Multiple mirror about the +ve x-axis and single about
# -ve x-axis
# Structure manipulation before remesh
MIRROR axes="+2x, -1x"

REMESH delaunay 

# Base mesh
REFINE max.size=0.05 regions="*"

# Interface refinement but increase the distance over which
# the refinement grades over
REFINE max.interface.size=0.01 max.interface.distance=0.5 grading=linear

# Junction refinement
REFINE max.junction.size=0.02 grading="linear"

SAVE out="$'name'_VM_Multiple"

victoryvisual \
$'name'_VM_Half.str \
$'name'_VM_Single.str \
$'name'_VM_Multiple.str

QUIT
